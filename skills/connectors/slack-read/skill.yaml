# Skill: slack-read
# Version: 1.0.0
#
# Read messages from Slack channels and DMs via the Slack API.
# Credentials stay local on Expanso Edge — never transmitted.
#
# Compose with security skills for safe agent access:
#   access-gate → slack-read → pii-redact → data-fence → audit-log

name: "slack-read"
version: "1.0.0"
description: "Read messages from Slack channels and DMs with filtering and search"

author:
  name: "Expanso Team"
  url: "https://expanso.io"
  avatar: "EX"

# Credentials (stored locally on Expanso Edge, never transmitted)
credentials:
  - name: SLACK_BOT_TOKEN
    required: true
    description: Slack Bot User OAuth Token (xoxb-...)
  - name: SLACK_CHANNEL_ID
    required: false
    description: Default channel ID to read from

# Skill inputs
inputs:
  - name: channel
    type: string
    required: true
    description: Slack channel ID (e.g., C01234567)
  - name: limit
    type: integer
    default: 20
    description: Maximum messages to retrieve (1-100)
  - name: query
    type: string
    required: false
    description: Optional search query to filter messages
  - name: since_hours
    type: integer
    default: 24
    description: Retrieve messages from last N hours

# Skill outputs
outputs:
  - name: messages
    type: array
    description: "Array of messages: {id, user, text, timestamp, thread_ts, reactions}"
  - name: channel_info
    type: object
    description: "Channel metadata: {id, name, topic, purpose, member_count}"
  - name: metadata
    type: object
    description: "Processing metadata: {skill, trace_id, message_count, timestamp}"

# Backend options
backends:
  - name: slack-api
    type: remote
    requires: [SLACK_BOT_TOKEN]
    description: Slack Web API (requires bot token with channels:history scope)

# Expanso components used
components:
  inputs:
    - stdin
    - http_server
  processors:
    - mapping
    - http
    - log
  outputs:
    - stdout
    - sync_response
